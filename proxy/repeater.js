"use strict";(()=>{var t={port:8002};eG("LISTEN_PORT")&&(t.port=parseInt(eG("LISTEN_PORT")));var r=async function(n,a){if(n.headers?.has("Upgrade")){let{socket:e,response:o}=Deno.upgradeWebSocket(n);return e.binaryType="arraybuffer",e.addEventListener("open",()=>{console.info("Repeater connected.")}),e.addEventListener("message",s=>{e.send(s.data),console.info(`Repeated ${s.data.length} bytes.`)}),e.addEventListener("close",()=>{console.info("Repeater closed.")}),o}else return new Response(`<!DOCTYPE html><head><style>html{background:#000}</style><script>self.ws=new WebSocket("ws://127.0.0.1:${t.port}");ws.addEventListener("close",()=>{setTimeout(()=>{location.reload()},4000)})<\/script></head><body></body>`,{headers:{"content-type":"text/html"},status:200})};serve(r,t);})();
