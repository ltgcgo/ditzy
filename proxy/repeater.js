"use strict";(()=>{var t={port:8002};eG("LISTEN_PORT")&&(t.port=parseInt(eG("LISTEN_PORT")));var a=async function(s,o){if(s.headers?.has("Upgrade")){let{socket:e,response:r}=Deno.upgradeWebSocket(s);return e.binaryType="arraybuffer",e.addEventListener("open",()=>{e.send("Repeater hello.")}),e.addEventListener("message",n=>{e.send(n.data),console.info(`Repeated ${n.data.length} bytes.`)}),r}else return new Response(`<!DOCTYPE html><head><style>html{background:#000}</style><script>self.ws=new WebSocket("ws://127.0.0.1:${t.port}");ws.addEventListener("close",()=>{setTimeout(()=>{location.reload()},4000)})<\/script></head><body></body>`,{headers:{"content-type":"text/html"},status:200})};serve(a,t);})();
